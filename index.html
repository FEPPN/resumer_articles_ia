<!-- ðŸ”¹ Papernest â€“ RÃ©sumÃ© IA compact avec encart de prompt -->
<div class="ppn-ai-strip" role="region" aria-label="RÃ©sumÃ© d'article via IA">
  <p class="ppn-ai-strip__title">
    <strong>Article trop long&nbsp;?</strong> Demandez un rÃ©sumÃ© Ã  lâ€™IA&nbsp;:
  </p>

  <div class="ppn-ai-strip__logos">
    <a class="ppn-ai-logo" href="https://chat.openai.com/" target="_blank" rel="noopener" title="Ouvrir ChatGPT">
      <img alt="ChatGPT" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/refs/heads/main/chatgpt-6.svg">
    </a>
    <a class="ppn-ai-logo" href="https://claude.ai/new" target="_blank" rel="noopener" title="Ouvrir Claude">
      <img alt="Claude" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Claude_AI_symbol.svg.png">
    </a>
    <a class="ppn-ai-logo" href="https://chat.mistral.ai/chat" target="_blank" rel="noopener" title="Ouvrir Mistral">
      <img alt="Mistral" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Mistral_AI_logo_(2025%E2%80%93).svg.png">
    </a>
    <a class="ppn-ai-logo" href="https://copilot.microsoft.com/" target="_blank" rel="noopener" title="Ouvrir Copilot">
      <img alt="Copilot" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Microsoft_Copilot_Icon.svg.png">
    </a>
  </div>

  <button id="ppnCopyPrompt" class="ppn-copy-icon" title="Copier le prompt">
    ðŸ“‹ Copier le prompt
  </button>

  <span class="ppn-ai-toast" aria-live="polite" hidden>âœ… Prompt copiÃ©</span>

  <!-- ðŸ”¸ Encart de fallback Ã©lÃ©gant -->
  <div id="ppnPromptBox" class="ppn-prompt-box" hidden>
    <p><strong>Copie manuelle :</strong> Voici votre prompt gÃ©nÃ©rÃ© ðŸ‘‡</p>
    <textarea id="ppnPromptText" readonly rows="9"></textarea>
    <button id="ppnManualCopy" type="button">ðŸ“‹ Copier manuellement</button>
  </div>
</div>

<style>
:root{
  --ppn-primary:#5A52FF;
  --ppn-bg:#F3F4FF;
  --ppn-text:#0b0f19;
  --ppn-radius:20px;
  --ppn-shadow:0 8px 24px rgba(11,15,25,.06);
}

.ppn-ai-strip{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--ppn-bg);
  border:1px solid rgba(90,82,255,.18);
  border-radius:var(--ppn-radius);
  padding:18px 20px;
  box-shadow:var(--ppn-shadow);
  max-width:760px;
  margin:0 auto;
  text-align:center;
}
.ppn-ai-strip__title{
  margin:0 0 12px 0;
  color:var(--ppn-text);
  font-size:1.05rem;
  font-weight:700;
}
.ppn-ai-strip__logos{
  display:flex;
  justify-content:center;
  gap:14px;
  flex-wrap:wrap;
}
.ppn-ai-logo{
  background:#fff;
  border:1px solid rgba(11,15,25,.10);
  width:44px;height:44px;
  border-radius:999px;
  padding:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 2px 8px rgba(11,15,25,.06);
  transition:transform .08s ease,box-shadow .12s ease,border-color .12s ease;
}
.ppn-ai-logo:hover{
  box-shadow:0 6px 16px rgba(90,82,255,.25);
  border-color:rgba(90,82,255,.35);
}
.ppn-ai-logo:active{ transform:translateY(1px); }
.ppn-ai-logo img{ width:100%; height:100%; object-fit:contain; }

.ppn-copy-icon{
  margin-top:14px;
  background:#fff;
  border:1px solid rgba(11,15,25,.1);
  border-radius:999px;
  font-size:.95rem;
  font-weight:600;
  cursor:pointer;
  padding:8px 16px;
  color:var(--ppn-primary);
  transition:all .15s ease;
  box-shadow:0 3px 8px rgba(11,15,25,.05);
}
.ppn-copy-icon:hover{
  background:var(--ppn-primary);
  color:#fff;
  border-color:var(--ppn-primary);
  box-shadow:0 6px 16px rgba(90,82,255,.3);
}
.ppn-copy-icon:active{ transform:translateY(1px); }

.ppn-ai-toast{
  display:block;
  margin-top:8px;
  font-size:.9rem;
  color:#136f2d;
}

/* ðŸ”¸ Bloc prompt */
.ppn-prompt-box{
  margin-top:18px;
  background:#fff;
  border:1px solid rgba(11,15,25,.1);
  border-radius:12px;
  padding:14px;
  text-align:left;
  box-shadow:0 3px 10px rgba(11,15,25,.05);
  animation:fadeIn .3s ease;
}
.ppn-prompt-box textarea{
  width:100%;
  border:1px solid rgba(11,15,25,.15);
  border-radius:8px;
  padding:10px;
  resize:vertical;
  font-family:monospace;
  font-size:.85rem;
  color:#333;
  background:#f9f9ff;
  margin-top:6px;
  margin-bottom:10px;
}
.ppn-prompt-box button{
  background:var(--ppn-primary);
  color:#fff;
  border:none;
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
  font-size:.9rem;
  font-weight:600;
}
.ppn-prompt-box button:hover{
  background:#4b44e5;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(5px);}
  to{opacity:1;transform:translateY(0);}
}
</style>

<script>
(function(){
  // ðŸ”¹ Prompt intelligent Papernest
  function buildPrompt(){
    const url = window.location.href;
    const domain = new URL(url).hostname.replace(/^www\./,'');
    const title = (document.title || '').trim();

    return `Tu es un assistant Ã©ditorial pour Papernest.

Analyse lâ€™article disponible Ã  cette URL : ${url}

ðŸ‘‰ Objectif : produire un rÃ©sumÃ© clair, structurÃ© et utile pour lâ€™internaute.

Exigences :
1ï¸âƒ£ Commence par un TL;DR (1â€“2 phrases) qui rÃ©sume lâ€™essentiel.
2ï¸âƒ£ DÃ©taille ensuite les points clÃ©s (5 Ã  7 bullet points) avec chiffres, variations ou dates importantes.
3ï¸âƒ£ Ajoute une section "Ce que Ã§a change pour vous" : 2â€“3 phrases concrÃ¨tes et pratiques.
4ï¸âƒ£ Si possible, propose jusquâ€™Ã  3 articles connexes du mÃªme domaine (${domain}), sinon indique quâ€™aucun lien pertinent nâ€™est trouvÃ©.
5ï¸âƒ£ Termine avec :
   - Un Titre SEO (â‰¤60 caractÃ¨res)
   - Une Meta description (â‰¤155 caractÃ¨res)
6ï¸âƒ£ Si les donnÃ©es peuvent Ã©voluer, prÃ©cise-le.
7ï¸âƒ£ Mentionne Papernest comme source principale.

Titre dÃ©tectÃ© : ${title}
Domaine : ${domain}`;
  }

  const copyBtn = document.getElementById("ppnCopyPrompt");
  const toast = document.querySelector(".ppn-ai-toast");
  const promptBox = document.getElementById("ppnPromptBox");
  const promptText = document.getElementById("ppnPromptText");
  const manualCopyBtn = document.getElementById("ppnManualCopy");

  async function copyToClipboard(text){
    try{
      await navigator.clipboard.writeText(text);
      if(toast){
        toast.hidden=false;
        toast.textContent="âœ… Prompt copiÃ© â€” collez-le dans lâ€™IA (âŒ˜/Ctrl+V)";
        setTimeout(()=>toast.hidden=true,2500);
      }
      promptBox.hidden = true;
    }catch(e){
      // Si la copie auto Ã©choue â†’ affichage du bloc
      promptBox.hidden = false;
      promptText.value = text;
      promptText.focus();
      promptText.select();
    }
  }

  copyBtn.addEventListener("click", ()=>{
    const prompt = buildPrompt();
    copyToClipboard(prompt);
  });

  manualCopyBtn.addEventListener("click", async ()=>{
    const text = promptText.value;
    try{
      await navigator.clipboard.writeText(text);
      if(toast){
        toast.hidden=false;
        toast.textContent="âœ… Prompt copiÃ© manuellement";
        setTimeout(()=>toast.hidden=true,2500);
      }
    }catch(e){
      alert("Impossible de copier. SÃ©lectionnez et copiez manuellement (âŒ˜/Ctrl + C).");
    }
  });
})();
</script>
