<!-- üîπ Papernest ‚Äì R√©sum√© IA compact (clic logo = copie du prompt) -->
<div class="ppn-ai-strip" role="region" aria-label="R√©sum√© d'article via IA">
  <p class="ppn-ai-strip__title">
    <strong>Article trop long&nbsp;?</strong> Demandez un r√©sum√© √† l‚ÄôIA&nbsp;:
  </p>

  <div class="ppn-ai-strip__logos">
    <!-- ChatGPT -->
    <button class="ppn-ai-logo" data-ai="ChatGPT" title="Copier le prompt pour ChatGPT">
      <img alt="ChatGPT" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/refs/heads/main/chatgpt-6.svg">
    </button>

    <!-- Claude -->
    <button class="ppn-ai-logo" data-ai="Claude" title="Copier le prompt pour Claude">
      <img alt="Claude" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Claude_AI_symbol.svg.png">
    </button>

    <!-- Mistral -->
    <button class="ppn-ai-logo" data-ai="Mistral" title="Copier le prompt pour Mistral">
      <img alt="Mistral" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Mistral_AI_logo_(2025%E2%80%93).svg.png">
    </button>

    <!-- Copilot -->
    <button class="ppn-ai-logo" data-ai="Copilot" title="Copier le prompt pour Copilot">
      <img alt="Copilot" src="https://raw.githubusercontent.com/FEPPN/resumer_articles_ia/1b694246d10d428d5464dacf3cbf866844d95861/Microsoft_Copilot_Icon.svg.png">
    </button>
  </div>

  <!-- Message discret -->
  <div class="ppn-ai-hint" aria-live="polite">Clique sur une IA pour copier le prompt.</div>

  <!-- D√©pliable ultra-simple si la copie auto √©choue -->
  <details id="ppnFallback" class="ppn-fallback" hidden>
    <summary>Afficher le prompt</summary>
    <textarea id="ppnPromptText" readonly rows="8"></textarea>
  </details>
</div>

<style>
:root{
  --ppn-primary:#5A52FF;
  --ppn-bg:#F3F4FF;
  --ppn-text:#0b0f19;
  --ppn-radius:20px;
  --ppn-shadow:0 8px 24px rgba(11,15,25,.06);
}

.ppn-ai-strip{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--ppn-bg);
  border:1px solid rgba(90,82,255,.18);
  border-radius:var(--ppn-radius);
  padding:18px 20px;
  box-shadow:var(--ppn-shadow);
  max-width:760px;
  margin:0 auto;
  text-align:center;
}
.ppn-ai-strip__title{margin:0 0 12px;color:var(--ppn-text);font-size:1.05rem;font-weight:700;}
.ppn-ai-strip__logos{display:flex;justify-content:center;gap:14px;flex-wrap:wrap}
.ppn-ai-logo{
  background:#fff;border:1px solid rgba(11,15,25,.1);
  width:44px;height:44px;border-radius:999px;padding:8px;cursor:pointer;
  display:inline-flex;align-items:center;justify-content:center;
  transition:transform .08s ease, box-shadow .12s ease, border-color .12s ease;
  box-shadow:0 2px 8px rgba(11,15,25,.06);
}
.ppn-ai-logo:hover{box-shadow:0 6px 16px rgba(90,82,255,.25);border-color:rgba(90,82,255,.35);}
.ppn-ai-logo:active{transform:translateY(1px);}
.ppn-ai-logo img{width:100%;height:100%;object-fit:contain}

.ppn-ai-hint{margin-top:10px;font-size:.92rem;color:#475569}

.ppn-fallback{margin-top:10px;text-align:left}
.ppn-fallback summary{cursor:pointer;color:var(--ppn-primary);font-weight:600}
.ppn-fallback textarea{
  width:100%;margin-top:8px;background:#fff;border:1px solid rgba(11,15,25,.15);
  border-radius:10px;padding:10px;font-family:monospace;font-size:.85rem
}

@media (max-width:560px){ .ppn-ai-logo{width:40px;height:40px;padding:7px} }
</style>

<script>
(function(){
  // Prompt intelligent (URL + titre + consignes)
  function buildPrompt(){
    const url = window.location.href;
    const domain = new URL(url).hostname.replace(/^www\./,'');
    const title = (document.title || '').trim();

    return `Tu es un assistant √©ditorial pour Papernest.

Analyse l‚Äôarticle √† cette URL : ${url}

Objectif : produire un r√©sum√© clair, structur√© et utile.

Exigences :
1) TL;DR en 1‚Äì2 phrases.
2) 5‚Äì7 points cl√©s avec chiffres/dates/variations (‚Ç¨/%, kWh‚Ä¶).
3) Section ‚ÄúCe que √ßa change pour vous‚Äù (2‚Äì3 phrases actionnables).
4) Si possible, jusqu‚Äô√† 3 articles connexes du m√™me domaine (${domain}); sinon indique qu‚Äôaucun lien pertinent n‚Äôest disponible.
5) Ajoute un avertissement si certaines infos peuvent √©voluer.
6) Fournis un Titre SEO (‚â§60 car.) et une Meta description (‚â§155 car.).
7) Mentionne Papernest comme source principale.

Titre d√©tect√© : ${title}
Domaine : ${domain}`;
  }

  const logos = document.querySelectorAll(".ppn-ai-logo");
  const hint  = document.querySelector(".ppn-ai-hint");
  const fallback = document.getElementById("ppnFallback");
  const promptText = document.getElementById("ppnPromptText");

  async function tryCopy(text){
    try{
      await navigator.clipboard.writeText(text);
      return true;
    }catch{ return false; }
  }

  logos.forEach(btn=>{
    btn.addEventListener("click", async ()=>{
      const ai = btn.getAttribute("data-ai") || "l‚ÄôIA";
      const prompt = buildPrompt();
      const ok = await tryCopy(prompt);

      if(ok){
        hint.textContent = `‚úÖ Prompt copi√© ‚Äî plus qu'√† le coller ou vous le souhaitez !`;
      }else{
        // Copie bloqu√©e : on propose le prompt √† copier manuellement, proprement
        hint.textContent = `‚ÑπÔ∏è Copie auto bloqu√©e ‚Äî ouvrez ${ai}, puis copiez/collez le prompt ci-dessous.`;
        fallback.hidden = false;
        promptText.value = prompt;
        promptText.focus(); promptText.select();
      }
    });
  });
})();
</script>
